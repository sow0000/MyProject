	AREA		Project, CODE, READONLY
	ENTRY
	
start
		LDR r0, =Random_data
		LDR r1, =Array_data

		LDR r2, Length
		ADD	r2, r2, #1											;length=1000
		MOV	r3,r2,LSR #1										;interval=length/2
	
loop1																;shell sort
		MOV r4, #0												;i=0

loop2
		ADD	r5, r4, r3 											;j=i+interval
	
loop3
		CMP	r5,r2
		BGE	Endloop3											;j>=length
	
		ADD	r6, r0, r5, LSL #2								;index with 4bytes
		LDR r7, [r6]												;temp=data[j]
		SUB	r8, r6, r3, LSL #2								;k=j-interval, indexed
	
loop4
		CMP	r8,r0
		BLT	Endloop4											;k<0
	
		LDR	r9, [r8]											;data[k]
		CMP	r9, r7
		BLE	Endloop4											;data[k]<=temp
	
		ADD	r10, r8, r3, LSL #2								;k+interval, indexed
		STR	r9, [r10]											;data[k+interval]=data[k]
		SUB	r8, r8, r3, LSL #2								;k-=interval
		B	loop4
	
Endloop4	
		ADD	r10, r8, r3, LSL #2								;k+interval, indexed
		STR	r7, [r10]											;data[k+interval]=temp
		ADD	r5, r5, r3											;j+=interval
		B	loop3
	
Endloop3
		ADD	r4, r4, #1											;i++
		CMP	r4, r3
		BLT	loop2												;i<interval
	
		LSR	r3, #1												;interval /= 2
		CMP	r3, #0
		BGT	loop1												;interval > 0
		
		MOV	r2, #0
	
CopySorted
		LDMFD r0!, {r3-r12}									;input data with 2bytes
		STRH r3, [r1], #2										;copy data
		STRH r4, [r1], #2
		STRH r5, [r1], #2
		STRH r6, [r1], #2
		STRH r7, [r1], #2
		STRH r8, [r1], #2
		STRH r9, [r1], #2
		STRH r10, [r1], #2
		STRH r11, [r1], #2
		STRH r12, [r1], #2
	
		ADD r2,r2,#1												;r2++
		CMP r2, #100											;100x10
		BNE CopySorted
		
Search
		LDR r0, =Search_data								;address of Search_data
		LDR r1, =Array_data									;address of Array_data
		LDR r11, Address1									;0x40000000
		MOV r12, #0												;initialize
	
loop5
		LDR r3, [r0], #4										;search data
	
		MOV r4, #0												;small for Binary Search
		LDR r5, Length											;big for Binary Search
	
loop6
		SUB r6, r5, r4											;big - small
		LSR r6, #1												;(big - small) / 2
		ADD r6, r6, r4											;small + (big - small) / 2
		LSL r6, #1												;2bytes unit
		
		ADD r7, r1, r6
		LDRH r8, [r7]											;middle data
		
		CMP r8, r3												;middle data ? search data
		
		ADDEQ r12, r12, #1									;find data
		STRHEQ r3, [r11], #2								;store data in 0x40000000
		BEQ Endloop6											;escape
		
		LSR r6, #1
		ADDLT r4, r6, #1										;middle data < search data
		SUBGT r5, r6, #1										;middle data > search data
		
		CMP r4, r5												;small ? big
		BLE loop6												;small < big
		
Endloop6
		SUB r2,r2,#1											;cycle --
		CMP r2, #0 												;search complete?
		BNE loop5
		
Endline
		MOV pc,#0

Address1 DCD &40000000

	LTORG
Length
		DCI	0x000003E7									;999

Bandwidth
		DCI	0x00000FA0									;4000
	
Random_data DCD 1190,2819,708,4164,124,1226,4240,2788,1025,1590,2514,4745,262,1352,2087,2478,4817,4760,643,918,112,1952,1951,4685,2014,2845,3824,3975,3603,4301,4545,4237,2790,311,1967,4195,3284,4055,2587,2795,3217,553,866,132,2226,2252,1723,605,709,133,1796,2230,1108,1359,496,2442,959,2659,1166,247,770,1430,86,704,2535,2825,2946,2299,3567,67,2306,3670,1658,1574,472,2201,4014,3588,901,1110,1334,2093,2266,2616,2303,1677,1680,2225,2494,1583,2428,2409,2531,2459,1109,1177,2722,3097,2393,3148,2096
	    DCD 3064,1607,1665,188,1616,324,1333,2652,3478,1150,2926,2405,2613,1441,1788,3533,3568,3250,2,2074,1634,326,1740,2860,785,3635,1989,3661,3823,4081,4085,4533,4555,341,1065,2263,2018,1917,927,1533,1719,1776,584,1455,1878,109,3634,3740,2213,1453,1518,3433,2805,49,3133,2369,1151,4061,3309,88,3180,3488,2238,4637,2320,4084,4679,241,490,824,2032,4259,3880,692,3145,2648,1710,1553,492,1520,290,669,2728,1814,421,3653,3451,3065,802,2483,1925,879,116,525,1157,2175,3469,4071,4167,1724,2008
	    DCD 479,1803,4082,4104,1585,194,1156,3320,2354,1007,2136,3181,3995,3169,574,1224,1650,1006,3189,1669,3258,4013,3970,1233,4419,773,510,3608,4725,3720,3645,3520,486,1404,2013,3082,2703,1529,3459,130,478,3936,3855,2232,1929,2196,2541,2756,4712,4636,3742,4216,1566,4598,1545,179,1384,1835,2856,2610,2200,666,1873,3620,3826,1114,4325,3287,3817,325,2020,167,4358,4356,1769,151,1390,2603,3015,2433,2883,2726,3987,3863,1819,40,786,4053,3743,3013,427,662,3712,3046,350,1963,2932,2690,1080,2530,5
	    DCD 2473,1708,544,1283,367,221,1594,655,1794,2555,95,2307,2168,31,1395,2916,3388,1975,2624,2469,729,1053,837,617,250,1681,1810,2163,1613,2422,3402,3695,3289,2711,1491,1853,1799,128,252,1303,811,988,1055,1982,2321,1265,2057,2671,2699,3366,3646,2808,4060,4275,1106,1473,2129,3303,985,4491,2358,4292,4500,2231,4508,3118,777,1327,3131,2630,4621,1117,3750,4091,2276,1636,1019,222,2413,3264,3058,3669,4549,4180,4162,4058,3715,2794,2481,526,2920,3664,4661,2082,3700,4723,3503,4718,865,1525,3738
	    DCD 2574,1866,43,924,3007,827,2054,1931,1937,946,3909,816,3412,2814,4192,1064,4054,4039,2918,2361,1291,1988,3400,3385,2237,648,3161,3246,3108,1198,754,1916,295,1256,2377,405,2793,1676,2992,1402,345,2267,2658,2872,3021,2042,883,3617,3840,2338,3926,410,4173,436,3144,4196,3154,1624,2999,3384,4322,4633,3962,1996,3099,2691,3242,2110,2928,3859,3853,3610,1279,2279,559,902,1815,1860,1498,2672,3368,2408,1901,1319,491,1011,1509,3157,2660,195,1546,2019,2083,3453,3762,4747,4751,4794,499,4795,4207
	    DCD 4816,35,4862,1943,4864,4868,4882,4884,554,2240,4889,4890,4891,1383,3365,4309,4905,297,4390,4330,842,2044,2486,2161,4687,1135,3496,4906,593,4847,389,2954,3030,3392,4846,4842,4833,2480,2092,3422,3955,2005,1647,4713,4037,4710,456,1378,4513,4574,823,2452,3633,383,3155,3389,3125,3116,764,1944,1307,533,9,337,2553,2813,1349,2185,2309,1865,1871,3098,1142,2336,1097,1009,1463,3586,701,1148,1342,2774,2797,4087,4110,787,4152,140,4172,3716,4381,4308,2117,4699,4811,501,4736,2046,4700,1790,4107
	    DCD 4697,3173,2162,1483,4570,2323,2576,2171,1535,1657,220,677,2513,2050,2345,4559,690,621,2174,2519,4444,503,4532,4517,4511,4467,1178,4331,2730,3070,1909,1200,110,1186,3667,4193,543,3952,895,3721,3415,446,3107,3178,2664,3248,3530,3348,3267,2771,557,1635,1993,2221,1094,2597,2732,2971,3454,2791,1838,131,38,51,1919,1354,2349,3152,4430,3003,3068,4159,3601,2763,4367,2595,569,1653,1649,1230,1446,171,1449,1597,1922,2913,4364,4327,4270,4242,615,460,4044,3920,3598,1246,2983,3307,1523,3089,2812
	    DCD 815,1116,1297,647,93,1221,698,1673,1806,1870,1345,939,880,1500,1897,3383,432,1960,3162,4118,3014,2061,4219,4074,4066,2619,3625,1048,568,3866,3822,888,2429,803,3421,1745,2933,3136,2280,635,1174,1468,2269,2687,1314,2264,3785,3623,1516,1056,3517,3324,1144,2003,915,2963,1789,1274,1427,2438,820,971,1182,1709,2130,3508,3150,257,1763,1486,469,3605,3967,3787,169,956,3409,2158,2209,3102,87,1774,3528,3028,2837,260,1489,1907,2865,1845,498,1317,772,105,995,1249,2249,2704,1501,623,122
	    DCD 1461,2968,3317,2206,3836,340,3570,953,176,400,1935,3851,2222,779,1872,2293,3949,3816,1075,676,1617,1660,2234,914,2265,3810,3971,1401,2561,2922,3347,2339,2166,2073,3291,4099,1290,1362,796,4120,4210,4279,2643,1037,75,4320,392,2112,4495,2804,4097,4577,56,4590,4591,4627,903,298,4668,4755,3408,3127,2876,1232,1467,2243,3104,1032,685,4773,4838,3390,134,1348,4840,694,2443,598,1014,3688,4858,4659,4175,2414,3372,3482,4038,2908,4911,4914,4915,4917,558,4498,1381,1595,590,596,2656,1444,4932
	    DCD 2401,1149,2109,3121,4945,1299,68,401,473,2116,388,162,493,2214,2738,3091,4953,4959,2650,3574,3113,2681,681,1591,4462,3550,111,3206,3374,3330,263,2751,4277,2436,2352,4967,190,2985,4970,4963,1240,3005,4971,4571,3788,3651,1675,1811,2532,1755,1132,3622,3435,1189,2529,3171,2941,136,825,2847,2827,857,667,1018,214,899,1029,822,351,789,2533,1880,4979,4394,1849,4544,4316,4996,4861,3002,1868,2102,863,760,1443,476,2844,4826,3514,530,20

Search_data DCD 2005,4965,1342,499,1590,2603,3555,4758,4893,562,4699,4621,824,4554,1871,4594,3853,1513,3693,1235,1319,715,1583,3347,1256,121,639,2222,1972,609,623,1982,569,1677,797,124,2672,3081,3245,3356,3256,2827,2588,1363,647,2281,2053,498,1011,2354,1873,1654,525,657,1200,1975,936,2469,1333,1588,1226,918,1400,1362,1546,2529,2918,3530,3664,3287,716,3855,2846,3920,3307,3981,2531,3974,1401,4039,1349,2651,4051,822,1701,2428,2125,214,2452,2690,1866,3317,4084,3669,4313,4023,3180,2624,2530,2209

Array_data DCW 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DCW 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DCW 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DCW 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DCW 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DCW 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DCW 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DCW 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DCW 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	DCW 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	
		END
